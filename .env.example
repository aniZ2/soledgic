# Soledgic Environment Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ============================================================================
# SUPABASE (Required)
# ============================================================================

# Your Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous key (safe for client-side)
SUPABASE_ANON_KEY=eyJ...your-anon-key

# Supabase service role key (server-side only, KEEP SECRET)
SUPABASE_SERVICE_ROLE_KEY=eyJ...your-service-role-key

# For Next.js client
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...your-anon-key

# ============================================================================
# CARD PROCESSOR (Required)
# ============================================================================

# Primary processor credentials (server-side only, KEEP SECRET)
PROCESSOR_USERNAME=
PROCESSOR_PASSWORD=

# sandbox or production
PROCESSOR_ENV=sandbox

# Required base URL for the processor API
PROCESSOR_BASE_URL=https://api.example-processor.com

# Required merchant / settlement configuration (server-side only)
PROCESSOR_MERCHANT_ID=

# Optional versioning headers (set if your processor requires them)
PROCESSOR_API_VERSION=
PROCESSOR_VERSION_HEADER=

# Optional path override for transfer/charge endpoints
PROCESSOR_TRANSFERS_PATH=/transfers

# Optional path template for refunds/reversals (use `{id}` for the payment id)
PROCESSOR_REFUNDS_PATH_TEMPLATE=/transfers/{id}/reversals

# Source id used for outbound payouts (server-side only)
PROCESSOR_PAYOUT_SOURCE_ID=

# Processor application + hosted onboarding forms (optional)
PROCESSOR_APPLICATION_ID=
PROCESSOR_ONBOARDING_FORM_ID=

# Hosted form for collecting an org billing method (can be the same as PROCESSOR_ONBOARDING_FORM_ID if configured that way)
PROCESSOR_BILLING_ONBOARDING_FORM_ID=

# ============================================================================
# PROCESSOR WEBHOOKS (Optional)
# ============================================================================

# Protect /api/webhooks/processor with a shared token (recommended for production).
# Send via: Authorization: Bearer <token> OR x-soledgic-webhook-token: <token>
PROCESSOR_WEBHOOK_TOKEN=

# ============================================================================
# BILLING (Usage-Based Overages)
# ============================================================================

# Platform merchant + destination used to charge overages (server-side only)
BILLING_MERCHANT_ID= # Optional override, otherwise uses PROCESSOR_MERCHANT_ID
BILLING_DESTINATION_ID=

# ============================================================================
# EMAIL (Optional - for notifications)
# ============================================================================

RESEND_API_KEY=re_...
FROM_EMAIL=noreply@soledgic.com

# ============================================================================
# SECURITY
# ============================================================================

# Secret for cron job authentication (health checks, cleanup)
CRON_SECRET=your-random-secret-here

# ============================================================================
# DEVELOPMENT
# ============================================================================

# Set to 'development' for local, 'production' for deployed
NODE_ENV=development

# Local development port
PORT=3000
