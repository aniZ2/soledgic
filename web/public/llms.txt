# Soledgic

> Double-entry accounting API for modern businesses. Revenue splits, creator payouts, expense tracking, and tax compliance.

Soledgic is financial infrastructure that handles the accounting layer for marketplaces (like Gumroad, Teachable, Booklyverse) and traditional businesses. It provides atomic double-entry bookkeeping via API.

## Core Concepts

- **Ledger**: Isolated set of financial books. Each API key = one ledger.
- **Two Modes**: Marketplace (revenue splits) or Standard (traditional accounting)
- **Atomic Transactions**: All entries commit together or none do (PostgreSQL transactions)
- **Immutable Audit Trail**: Transactions cannot be edited, only reversed

## API Endpoints

### Recording Transactions

- `POST /record-sale` - Record sale with automatic revenue split (Marketplace mode)
- `POST /record-income` - Record income without splits (Standard mode)
- `POST /record-expense` - Record business expense with category
- `POST /record-refund` - Reverse a sale (debits creator balance)
- `POST /reverse-transaction` - Create offsetting entries for corrections

### Creator/Contractor Management

- `POST /process-payout` - Pay out creator earnings (validates available balance)
- `POST /manage-contractors` - Register creators, set custom splits, collect W-9
- `POST /manage-splits` - Configure tiered split percentages

### Reporting

- `GET /get-balance` - Query account balances (cash, receivables, creator balances)
- `GET /get-transactions` - List transactions with filters and pagination
- `GET /trial-balance` - Verify debits = credits
- `GET /profit-loss` - P&L statement by period
- `POST /close-period` - Lock accounting period (irreversible)
- `POST /reconcile` - Bank statement reconciliation

### Webhooks

Events: `transaction.created`, `payout.processed`, `creator.threshold_reached`, `period.closed`

## Key Features

### 5-Tier Split Priority (Marketplace Mode)

When calculating revenue splits, Soledgic checks in order:
1. Request-level `creator_percent` parameter
2. Creator's custom split (set via manage-contractors)
3. Product-level split (coming soon)
4. Creator's tier (Bronze 75%, Silver 80%, Gold 85%, Platinum 90%)
5. Ledger default (typically 80% to creator)

### Available Balance Calculation

```
Available Balance = Ledger Balance - Held Funds
```

Held funds include:
- Tax reserves (until W-9 collected)
- Refund buffers (30-day holds for chargebacks)

### Idempotency

All transaction endpoints use `reference_id` for idempotency. Duplicate calls return 409 with existing transaction ID.

### Amounts in Cents

All monetary amounts are integers in cents. $29.99 = 2999.

## Authentication

```
x-api-key: sk_live_your_api_key
```

API keys are scoped to a single ledger. Use `sk_test_` prefix for sandbox.

## Example: Record a Sale

```bash
curl -X POST https://api.soledgic.com/v1/record-sale \
  -H "x-api-key: sk_live_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "reference_id": "stripe_pi_abc123",
    "creator_id": "author_jane",
    "amount": 2999
  }'
```

Response:
```json
{
  "success": true,
  "transaction_id": "txn_xyz",
  "breakdown": {
    "gross_amount": 29.99,
    "creator_amount": 23.99,
    "platform_amount": 6.00,
    "creator_percent": 80
  },
  "creator_balance": 523.47
}
```

## Documentation

- Quickstart: /docs/quickstart
- Core Concepts: /docs/concepts
- API Reference: /docs/api
- Marketplace Guide: /docs/guides/marketplace
- Tax Exports: /docs/guides/tax-exports

## Links

- Website: https://soledgic.com
- Documentation: https://soledgic.com/docs
- API Base URL: https://api.soledgic.com/v1
