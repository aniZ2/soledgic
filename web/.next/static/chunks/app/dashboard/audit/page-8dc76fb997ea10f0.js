(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9817],{983:function(e,t,s){Promise.resolve().then(s.bind(s,3677))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,iconNode:u,...x}=e;return(0,a.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:s,strokeWidth:o?24*Number(i)/Number(n):i,className:r("lucide",l),...x},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,a.forwardRef)((s,c)=>{let{className:o,...l}=s;return(0,a.createElement)(i,{ref:c,iconNode:t,className:r("lucide-".concat(n(e)),o),...l})});return s.displayName="".concat(e),s}},1866:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},7580:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2934:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3315:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]])},2735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2062:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]])},5466:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},9985:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1621:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8728:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7689:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(2972),n=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},3677:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),n=s(9864),r=s(2265),c=s(1866),i=s(7580),o=s(9397),l=s(8728),d=s(2369),u=s(2735),x=s(2934),h=s(7168),m=s(6865);let p=(0,s(9205).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var y=s(3247),f=s(875),v=s(3235);let j={sale_recorded:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-emerald-600"}),payout_processed:(0,a.jsx)(i.Z,{className:"w-4 h-4 text-violet-600"}),account_created:(0,a.jsx)(o.Z,{className:"w-4 h-4 text-blue-600"}),expense_recorded:(0,a.jsx)(i.Z,{className:"w-4 h-4 text-stone-600"}),settings_updated:(0,a.jsx)(l.Z,{className:"w-4 h-4 text-stone-600"}),creator_updated:(0,a.jsx)(d.Z,{className:"w-4 h-4 text-violet-600"})},g={api:"bg-blue-100 text-blue-700",system:"bg-stone-100 text-stone-700",dashboard:"bg-violet-100 text-violet-700",webhook:"bg-amber-100 text-amber-700"};function b(){let{mode:e}=(0,v.c5)();(0,v.tf)();let[t,s]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0),[i,l]=(0,r.useState)("all"),[d,b]=(0,r.useState)(""),[k,N]=(0,r.useState)({total:0,today:0,accounts:0}),w=async()=>{c(!0);try{let[e,t]=await Promise.all([fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"list",limit:50})}),fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"summary"})})]),a=await e.json(),n=await t.json();a.success&&s(a.data||[]),n.success&&N(n.data)}catch(e){console.error("Failed to fetch audit log:",e)}c(!1)};(0,r.useEffect)(()=>{w()},[]);let Z=(e,t)=>{let s=(null==t?void 0:t.amount)?"$".concat((t.amount/100).toFixed(2)):"",a=(null==t?void 0:t.creator_id)?"@".concat(t.creator_id):"";switch(e){case"sale_recorded":return"Sale recorded: ".concat(s," for creator ").concat(a);case"payout_processed":return"Payout processed: ".concat(s," to ").concat(a);case"account_created":return"Account created: ".concat((null==t?void 0:t.account_name)||(null==t?void 0:t.name)||"Unknown");case"expense_recorded":return"Expense recorded: ".concat(s," - ").concat((null==t?void 0:t.description)||"");default:return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}},_=(t.length>0?t:[{id:"1",action:"sale_recorded",entity_type:"transaction",entity_id:"tx_1",details:{amount:29900,creator_id:"sarah"},source:"api",created_at:new Date().toISOString()},{id:"2",action:"account_created",entity_type:"account",entity_id:"acc_1",details:{name:"Creator Balance for @sarah"},source:"system",created_at:new Date(Date.now()-36e5).toISOString()},{id:"3",action:"expense_recorded",entity_type:"transaction",entity_id:"tx_2",details:{amount:5999,description:"Adobe Creative Cloud"},source:"dashboard",created_at:new Date(Date.now()-72e5).toISOString()},{id:"4",action:"payout_processed",entity_type:"transaction",entity_id:"tx_3",details:{amount:45e3,creator_id:"emma"},source:"api",created_at:new Date(Date.now()-864e5).toISOString()}]).filter(e=>!!(("transactions"!==i||"transaction"===e.entity_type)&&("accounts"!==i||"account"===e.entity_type)&&("system"!==i||["settings","config"].includes(e.entity_type))&&(!d||Z(e.action,e.details).toLowerCase().includes(d.toLowerCase()))));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-[#1C1917]",children:"System Audit"}),(0,a.jsx)("p",{className:"text-[14px] text-stone-500 mt-1",children:"Track every action, understand every change"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-lg text-[13px] font-medium hover:bg-stone-50",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Export Log"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-emerald-600"})}),(0,a.jsx)(x.Z,{className:"w-4 h-4 text-emerald-500"})]}),(0,a.jsx)("div",{className:"text-[12px] text-stone-500 font-medium",children:"Ledger Balance"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-emerald-600",children:"Balanced"}),(0,a.jsx)("div",{className:"text-[11px] text-stone-400 mt-1",children:"All debits equal credits"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-stone-100 flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-5 h-5 text-stone-600"})}),(0,a.jsx)(m.Z,{className:"w-4 h-4 text-amber-500"})]}),(0,a.jsx)("div",{className:"text-[12px] text-stone-500 font-medium",children:"Last Reconciliation"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-amber-600",children:"Dec 14"}),(0,a.jsx)("div",{className:"text-[11px] text-stone-400 mt-1",children:"Overdue"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-5",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-stone-100 flex items-center justify-center mb-2",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-stone-600"})}),(0,a.jsx)("div",{className:"text-[12px] text-stone-500 font-medium",children:"Auto-Created Accounts"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:k.accounts||8}),(0,a.jsx)("div",{className:"text-[11px] text-stone-400 mt-1",children:"of 24 total"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-5",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-stone-100 flex items-center justify-center mb-2",children:(0,a.jsx)(p,{className:"w-5 h-5 text-stone-600"})}),(0,a.jsx)("div",{className:"text-[12px] text-stone-500 font-medium",children:"API Calls Today"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:k.today||1847}),(0,a.jsxs)("div",{className:"text-[11px] text-stone-400 mt-1",children:[k.total||234," transactions MTD"]})]})]}),(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl px-5 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-800 font-medium mb-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Items Needing Attention"]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-[13px] text-amber-700",children:[(0,a.jsx)("span",{children:"5 unmatched receipts"}),(0,a.jsx)("span",{children:"12 pending payouts"}),(0,a.jsx)("span",{children:"2 unpaid bills"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 p-1 bg-stone-100 rounded-lg",children:["all","transactions","accounts","system"].map(e=>(0,a.jsx)("button",{onClick:()=>l(e),className:"px-4 py-1.5 rounded-md text-[13px] font-medium transition-colors ".concat(i===e?"bg-white text-[#1C1917] shadow-sm":"text-stone-500 hover:text-stone-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(y.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>b(e.target.value),placeholder:"Search audit log...",className:"w-full pl-10 pr-4 py-2 bg-white border rounded-lg text-[13px] placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-stone-200"})]}),(0,a.jsx)("button",{onClick:w,className:"p-2 bg-white border rounded-lg hover:bg-stone-50",children:(0,a.jsx)(h.Z,{className:"w-4 h-4 ".concat(n?"animate-spin":"")})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border",children:[(0,a.jsxs)("div",{className:"px-5 py-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Activity Log"}),(0,a.jsxs)("span",{className:"text-[13px] text-stone-500",children:[_.length," entries"]})]}),(0,a.jsx)("div",{className:"divide-y",children:_.map(e=>(0,a.jsxs)("div",{className:"px-5 py-4 flex items-center justify-between hover:bg-stone-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-stone-100 flex items-center justify-center",children:j[e.action]||(0,a.jsx)(p,{className:"w-4 h-4 text-stone-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[13px] font-medium",children:Z(e.action,e.details)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-[11px] px-1.5 py-0.5 rounded ".concat(g[e.source]||"bg-stone-100 text-stone-600"),children:e.source}),(0,a.jsx)("span",{className:"text-[11px] text-stone-400",children:e.action.replace(/_/g," ")})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-[13px] text-stone-500",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)("button",{className:"text-[12px] text-stone-400 hover:text-stone-600",children:(0,a.jsx)(f.Z,{className:"w-4 h-4 inline"})})]})]},e.id))})]})]})}function k(){return(0,a.jsx)(v.dM,{mode:"marketplace",ledgerId:"0a885204-e07a-48c1-97e9-495ac96a2581",businessName:"Booklyverse",children:(0,a.jsx)(n.c,{children:(0,a.jsx)(b,{})})})}}},function(e){e.O(0,[2972,9864,2971,2117,1744],function(){return e(e.s=983)}),_N_E=e.O()}]);