(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6724],{4085:function(e,r,t){Promise.resolve().then(t.bind(t,2115))},9205:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var s=t(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:r,...d,width:a,height:a,stroke:t,strokeWidth:i?24*Number(o)/Number(a):o,className:n("lucide",l),...m},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),i=(e,r)=>{let t=(0,s.forwardRef)((t,d)=>{let{className:i,...l}=t;return(0,s.createElement)(o,{ref:d,iconNode:r,className:n("lucide-".concat(a(e)),i),...l})});return t.displayName="".concat(e),t}},8420:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},2369:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2115:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var s=t(7437),a=t(2265),n=t(2369),d=t(8420),o=t(5805);let i=(0,t(9205).Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);function l(){var e;let[r,t]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(""),[v,j]=(0,a.useState)("America/New_York"),[y,N]=(0,a.useState)("");(0,a.useEffect)(()=>{!async function(){try{var e;let[r,s]=await Promise.all([fetch("/api/profile"),fetch("/api/organizations")]),a=await r.json(),n=await s.json();if(a.profile&&(t(a.profile),b(a.profile.full_name||""),j(a.profile.timezone||"America/New_York")),(null===(e=n.organizations)||void 0===e?void 0:e.length)>0){let e=n.organizations[0];c({role:e.role,organization:e}),N(e.name)}}catch(e){console.error("Failed to load settings:",e)}m(!1)}()},[]);let k=async()=>{h(!0),g(null);try{if(!(await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:p,timezone:v})})).ok)throw Error("Failed to save");g({type:"success",text:"Profile updated"})}catch(e){g({type:"error",text:"Failed to save profile"})}h(!1)},w=async()=>{if(l&&"owner"===l.role){h(!0),g(null);try{if(!(await fetch("/api/organizations/".concat(l.organization.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y})})).ok)throw Error("Failed to save");g({type:"success",text:"Organization updated"})}catch(e){g({type:"error",text:"Failed to save organization"})}h(!1)}};if(u)return(0,s.jsx)("div",{className:"text-muted-foreground",children:"Loading..."});let C=(null==l?void 0:l.role)==="owner";return(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),(0,s.jsx)("p",{className:"mt-1 text-muted-foreground",children:"Manage your account and organization settings"}),f&&(0,s.jsx)("div",{className:"mt-4 p-3 rounded-md text-sm ".concat("success"===f.type?"bg-green-500/10 text-green-500 border border-green-500/20":"bg-destructive/10 text-destructive border border-destructive/20"),children:f.text}),(0,s.jsxs)("div",{className:"mt-8 bg-card border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Profile"})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Full name"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:(null==r?void 0:r.email)||"",disabled:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-muted text-muted-foreground"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Timezone"}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,s.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,s.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,s.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,s.jsx)("option",{value:"UTC",children:"UTC"}),(0,s.jsx)("option",{value:"Europe/London",children:"London (GMT)"}),(0,s.jsx)("option",{value:"Europe/Paris",children:"Paris (CET)"}),(0,s.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]}),(0,s.jsx)("button",{onClick:k,disabled:x,className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 disabled:opacity-50",children:x?"Saving...":"Save changes"})]})]}),l&&(0,s.jsxs)("div",{className:"mt-6 bg-card border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Organization"})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Organization name"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),disabled:!C,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-muted disabled:text-muted-foreground"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Organization ID"}),(0,s.jsx)("input",{type:"text",value:l.organization.id,disabled:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-muted text-muted-foreground font-mono text-sm"})]}),C&&(0,s.jsx)("button",{onClick:w,disabled:x,className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 disabled:opacity-50",children:x?"Saving...":"Save changes"})]})]}),l&&C&&(0,s.jsxs)("div",{className:"mt-6 bg-card border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Team Members"})]}),(0,s.jsx)("button",{className:"text-sm text-primary hover:underline",children:"Invite member"})]})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-primary",children:(null==p?void 0:p.charAt(0))||(null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.charAt(0).toUpperCase())})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:p||"You"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:null==r?void 0:r.email})]})]}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Owner"})]})})]}),(0,s.jsxs)("div",{className:"mt-6 bg-card border border-border rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"API Access"})]})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"API keys are managed per-ledger. Go to a specific ledger to view or regenerate its API key."})})]}),C&&(0,s.jsxs)("div",{className:"mt-6 bg-card border border-destructive/50 rounded-lg",children:[(0,s.jsx)("div",{className:"p-6 border-b border-destructive/50",children:(0,s.jsx)("h2",{className:"text-lg font-semibold text-destructive",children:"Danger Zone"})}),(0,s.jsx)("div",{className:"p-6 space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:"Delete organization"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your organization and all ledgers."})]}),(0,s.jsx)("button",{className:"px-4 py-2 border border-destructive text-destructive rounded-md hover:bg-destructive/10",children:"Delete"})]})})]})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4085)}),_N_E=e.O()}]);