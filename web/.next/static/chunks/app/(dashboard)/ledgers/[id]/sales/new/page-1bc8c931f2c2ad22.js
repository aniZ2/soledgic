(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6614],{991:function(e,r,t){Promise.resolve().then(t.bind(t,1220))},9205:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var o=t(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,o.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:i,...m}=e;return(0,o.createElement)("svg",{ref:r,...s,width:n,height:n,stroke:t,strokeWidth:l?24*Number(d)/Number(n):d,className:a("lucide",u),...m},[...i.map(e=>{let[r,t]=e;return(0,o.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),l=(e,r)=>{let t=(0,o.forwardRef)((t,s)=>{let{className:l,...u}=t;return(0,o.createElement)(d,{ref:s,iconNode:r,className:a("lucide-".concat(n(e)),l),...u})});return t.displayName="".concat(e),t}},2660:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});let o=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return n.a}});var o=t(2972),n=t.n(o)},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},1220:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var o=t(7437),n=t(2265),a=t(9376),s=t(7648),d=t(2660);function l(e){let{params:r}=e,{id:t}=(0,n.use)(r),[l,u]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),[m,f]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),y=(0,a.useRouter)(),N=async e=>{e.preventDefault(),g(!0),v(null);try{let e=await fetch("/api/ledgers/".concat(t,"/sales"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(100*parseFloat(l)),creator_id:c||void 0,description:m,reference_id:x||"sale_".concat(Date.now())})}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to record sale");y.push("/ledgers/".concat(t))}catch(e){v(e.message),g(!1)}};return(0,o.jsxs)("div",{className:"max-w-2xl",children:[(0,o.jsxs)(s.default,{href:"/ledgers/".concat(t),className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6",children:[(0,o.jsx)(d.Z,{className:"h-4 w-4"}),"Back to ledger"]}),(0,o.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Record Sale"}),(0,o.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Add a new sale transaction to your ledger."}),(0,o.jsxs)("div",{className:"mt-8 bg-card border border-border rounded-lg p-6",children:[b&&(0,o.jsx)("div",{className:"mb-6 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:b}),(0,o.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-foreground mb-2",children:"Amount"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,o.jsx)("input",{id:"amount",type:"number",step:"0.01",min:"0",value:l,onChange:e=>u(e.target.value),required:!0,className:"w-full pl-8 pr-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0.00"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"creatorId",className:"block text-sm font-medium text-foreground mb-2",children:"Creator ID (optional)"}),(0,o.jsx)("input",{id:"creatorId",type:"text",value:c,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Leave empty for platform-only revenue"}),(0,o.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"For marketplace sales, enter the creator's ID to track their revenue split."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"referenceId",className:"block text-sm font-medium text-foreground mb-2",children:"Reference ID (optional)"}),(0,o.jsx)("input",{id:"referenceId",type:"text",value:x,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., stripe_pi_xxx or order_123"}),(0,o.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"External reference for reconciliation (Stripe payment ID, order number, etc.)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),(0,o.jsx)("textarea",{id:"description",value:m,onChange:e=>f(e.target.value),rows:3,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"What was sold?"})]}),(0,o.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,o.jsx)("button",{type:"submit",disabled:p||!l,className:"flex-1 bg-primary text-primary-foreground py-3 rounded-md font-medium hover:bg-primary/90 disabled:opacity-50",children:p?"Recording...":"Record sale"}),(0,o.jsx)(s.default,{href:"/ledgers/".concat(t),className:"px-6 py-3 border border-border rounded-md text-foreground hover:bg-accent",children:"Cancel"})]})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=991)}),_N_E=e.O()}]);