(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6574],{6556:function(e,r,t){Promise.resolve().then(t.bind(t,8562))},9205:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:u="",children:l,iconNode:c,...m}=e;return(0,n.createElement)("svg",{ref:r,...s,width:a,height:a,stroke:t,strokeWidth:i?24*Number(d)/Number(a):d,className:o("lucide",u),...m},[...c.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(l)?l:[l]])}),i=(e,r)=>{let t=(0,n.forwardRef)((t,s)=>{let{className:i,...u}=t;return(0,n.createElement)(d,{ref:s,iconNode:r,className:o("lucide-".concat(a(e)),i),...u})});return t.displayName="".concat(e),t}},2660:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return a.a}});var n=t(2972),a=t.n(n)},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},8562:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var n=t(7437),a=t(2265),o=t(9376),s=t(7648),d=t(2660);function i(){let[e,r]=(0,a.useState)(""),[t,i]=(0,a.useState)("20"),[u,l]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),f=(0,o.useRouter)(),h=async r=>{r.preventDefault(),l(!0),m(null);try{let r=await fetch("/api/organizations"),n=await r.json();if(!n.organizations||0===n.organizations.length){f.push("/onboarding");return}let a=await fetch("/api/ledgers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform_name:e,organization_id:n.organizations[0].id,settings:{default_platform_fee_percent:parseInt(t)}})}),o=await a.json();if(!a.ok)throw Error(o.error||"Failed to create ledger");f.push("/ledgers/".concat(o.ledger.id))}catch(e){m(e.message),l(!1)}};return(0,n.jsxs)("div",{className:"max-w-2xl",children:[(0,n.jsxs)(s.default,{href:"/ledgers",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),"Back to ledgers"]}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Create new ledger"}),(0,n.jsx)("p",{className:"mt-2 text-muted-foreground",children:"A ledger is a separate set of books for one business or project."}),(0,n.jsxs)("div",{className:"mt-8 bg-card border border-border rounded-lg p-6",children:[c&&(0,n.jsx)("div",{className:"mb-6 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:c}),(0,n.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:"Business name"}),(0,n.jsx)("input",{id:"name",type:"text",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"My SaaS"}),(0,n.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"This is how the ledger will appear in your dashboard."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"fee",className:"block text-sm font-medium text-foreground mb-2",children:"Default platform fee (%)"}),(0,n.jsx)("input",{id:"fee",type:"number",min:"0",max:"100",value:t,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,n.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"For creator platforms: percentage you keep from each sale. Set to 100 for non-marketplace businesses."})]}),(0,n.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,n.jsx)("button",{type:"submit",disabled:u||!e,className:"flex-1 bg-primary text-primary-foreground py-3 rounded-md font-medium hover:bg-primary/90 disabled:opacity-50",children:u?"Creating...":"Create ledger"}),(0,n.jsx)(s.default,{href:"/ledgers",className:"px-6 py-3 border border-border rounded-md text-foreground hover:bg-accent",children:"Cancel"})]})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=6556)}),_N_E=e.O()}]);