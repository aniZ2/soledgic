(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7907],{7543:function(e,r,t){Promise.resolve().then(t.bind(t,7952))},9205:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var o=t(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,o.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:i,...m}=e;return(0,o.createElement)("svg",{ref:r,...s,width:n,height:n,stroke:t,strokeWidth:l?24*Number(d)/Number(n):d,className:a("lucide",u),...m},[...i.map(e=>{let[r,t]=e;return(0,o.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),l=(e,r)=>{let t=(0,o.forwardRef)((t,s)=>{let{className:l,...u}=t;return(0,o.createElement)(d,{ref:s,iconNode:r,className:a("lucide-".concat(n(e)),l),...u})});return t.displayName="".concat(e),t}},2660:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});let o=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return n.a}});var o=t(2972),n=t.n(o)},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},7952:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var o=t(7437),n=t(2265),a=t(9376),s=t(7648),d=t(2660);function l(){let[e,r]=(0,n.useState)([]),[t,l]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[i,m]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[h,b]=(0,n.useState)(!1),[v,y]=(0,n.useState)("bank_transfer"),[j,N]=(0,n.useState)({street:"",city:"",state:"",zip:""}),[k,w]=(0,n.useState)(""),[C,S]=(0,n.useState)(!1),[_,P]=(0,n.useState)(null),E=(0,a.useRouter)();(0,n.useEffect)(()=>{!async function(){var e;let t=await fetch("/api/ledgers"),o=await t.json();r(o.ledgers||[]),(null===(e=o.ledgers)||void 0===e?void 0:e.length)===1&&l(o.ledgers[0].id)}()},[]);let A=async e=>{e.preventDefault(),S(!0),P(null);try{let e=await fetch("/api/contractors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ledger_id:t,name:u,email:i,business_name:g||void 0,tax_id_last_four:x||void 0,w9_received:h,payment_method:v,address:j.street?j:void 0,notes:k||void 0})}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to add contractor");E.push("/contractors")}catch(e){P(e.message),S(!1)}};return(0,o.jsxs)("div",{className:"max-w-2xl",children:[(0,o.jsxs)(s.default,{href:"/contractors",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6",children:[(0,o.jsx)(d.Z,{className:"h-4 w-4"}),"Back to contractors"]}),(0,o.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Add Contractor"}),(0,o.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Track payments for 1099 reporting. We don't store full tax IDs."}),(0,o.jsxs)("div",{className:"mt-8 bg-card border border-border rounded-lg p-6",children:[_&&(0,o.jsx)("div",{className:"mb-6 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:_}),(0,o.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[e.length>1&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Ledger"}),(0,o.jsxs)("select",{value:t,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,o.jsx)("option",{value:"",children:"Select a ledger"}),e.map(e=>(0,o.jsx)("option",{value:e.id,children:e.platform_name},e.id))]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Full name *"}),(0,o.jsx)("input",{type:"text",value:u,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"John Smith"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email *"}),(0,o.jsx)("input",{type:"email",value:i,onChange:e=>m(e.target.value),required:!0,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"john@example.com"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Business name (if applicable)"}),(0,o.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Smith Consulting LLC"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"SSN/EIN last 4 digits"}),(0,o.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value.replace(/\D/g,"").slice(0,4)),maxLength:4,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"1234"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"For your reference only. Full tax ID stored on W-9."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Payment method"}),(0,o.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,o.jsx)("option",{value:"bank_transfer",children:"Bank Transfer (ACH)"}),(0,o.jsx)("option",{value:"check",children:"Check"}),(0,o.jsx)("option",{value:"paypal",children:"PayPal"}),(0,o.jsx)("option",{value:"venmo",children:"Venmo"}),(0,o.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("input",{type:"checkbox",id:"w9",checked:h,onChange:e=>b(e.target.checked),className:"w-4 h-4 rounded border-border"}),(0,o.jsx)("label",{htmlFor:"w9",className:"text-sm text-foreground",children:"W-9 received and on file"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Mailing address (for 1099)"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("input",{type:"text",value:j.street,onChange:e=>N({...j,street:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Street address"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,o.jsx)("input",{type:"text",value:j.city,onChange:e=>N({...j,city:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"City"}),(0,o.jsx)("input",{type:"text",value:j.state,onChange:e=>N({...j,state:e.target.value.toUpperCase().slice(0,2)}),maxLength:2,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"State"}),(0,o.jsx)("input",{type:"text",value:j.zip,onChange:e=>N({...j,zip:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"ZIP"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Notes"}),(0,o.jsx)("textarea",{value:k,onChange:e=>w(e.target.value),rows:3,className:"w-full px-4 py-3 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"Internal notes about this contractor"})]}),(0,o.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,o.jsx)("button",{type:"submit",disabled:C||!u||!i||!t&&e.length>1,className:"flex-1 bg-primary text-primary-foreground py-3 rounded-md font-medium hover:bg-primary/90 disabled:opacity-50",children:C?"Adding...":"Add contractor"}),(0,o.jsx)(s.default,{href:"/contractors",className:"px-6 py-3 border border-border rounded-md text-foreground hover:bg-accent text-center",children:"Cancel"})]})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=7543)}),_N_E=e.O()}]);