"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9864],{9864:function(e,t,s){s.d(t,{c:function(){return Z}});var a=s(7437),n=s(2265),o=s(7648),r=s(9376),l=s(2489),i=s(7689),c=s(8736),d=s(1817),x=s(5466),u=s(1866),m=s(7580),p=s(5805),h=s(9985),f=s(8906),b=s(2062),w=s(3247),y=s(3315),g=s(8728),v=s(1621),j=s(3235),N=s(9397);function k(e){let{isOpen:t,onClose:s}=e,o=(0,r.useRouter)(),{mode:l,labels:i}=(0,j.c5)(),[d,x]=(0,n.useState)(""),[h,y]=(0,n.useState)(0),v=(0,n.useMemo)(()=>[{id:"record-income",label:"marketplace"===l?"Record Sale":"Record Income",description:"Log revenue",icon:(0,a.jsx)(u.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/inflow/new"),keywords:["income","revenue","sale"],category:"action"},{id:"record-expense",label:"Record Expense",description:"Log expense",icon:(0,a.jsx)(m.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/outflow/new"),keywords:["expense","cost"],category:"action"},{id:"process-payout",label:"marketplace"===l?"Process Payout":"Pay Contractor",description:"Pay out",icon:(0,a.jsx)(p.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/outflow/payout"),keywords:["payout","pay"],category:"action"},{id:"add-contact",label:"marketplace"===l?"Add Creator":"Add Contact",description:"New entity",icon:(0,a.jsx)(N.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/directory/new"),keywords:["add","new","creator"],category:"action"},{id:"nav-dashboard",label:"Dashboard",description:"Overview",icon:(0,a.jsx)(b.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard"),keywords:["home","dashboard"],category:"navigation"},{id:"nav-inflow",label:i.inflowTab,description:i.primaryInflow,icon:(0,a.jsx)(u.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/inflow"),keywords:["inflow","revenue","sales"],category:"navigation"},{id:"nav-outflow",label:i.outflowTab,description:i.primaryOutflow,icon:(0,a.jsx)(m.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/outflow"),keywords:["outflow","expenses","payouts"],category:"navigation"},{id:"nav-directory",label:i.directoryTab,description:"".concat(i.primaryEntity),icon:(0,a.jsx)(p.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/directory"),keywords:["directory","contacts","creators"],category:"navigation"},{id:"nav-reports",label:"Reports",description:"P&L, Exports",icon:(0,a.jsx)(c.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/reports"),keywords:["reports"],category:"navigation"},{id:"nav-audit",label:"Audit",description:"System health",icon:(0,a.jsx)(f.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/audit"),keywords:["audit","log"],category:"navigation"},{id:"nav-settings",label:"Settings",description:"Config",icon:(0,a.jsx)(g.Z,{className:"w-4 h-4"}),action:()=>o.push("/dashboard/settings"),keywords:["settings"],category:"navigation"}],[l,i,o]),k=(0,n.useMemo)(()=>{if(!d.trim())return v.slice(0,8);let e=d.toLowerCase();return v.filter(t=>[t.label,t.description,...t.keywords].join(" ").toLowerCase().includes(e)).slice(0,10)},[d,v]),C=(0,n.useCallback)(e=>{if(t){if("ArrowDown"===e.key&&(e.preventDefault(),y(e=>Math.min(e+1,k.length-1))),"ArrowUp"===e.key&&(e.preventDefault(),y(e=>Math.max(e-1,0))),"Enter"===e.key){var a;e.preventDefault(),null===(a=k[h])||void 0===a||a.action(),s()}"Escape"===e.key&&(e.preventDefault(),s())}},[t,k,h,s]);return((0,n.useEffect)(()=>(window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)),[C]),(0,n.useEffect)(()=>{t&&(x(""),y(0))},[t]),(0,n.useEffect)(()=>{y(0)},[k.length]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-[100]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,a.jsx)("div",{className:"absolute left-1/2 top-[20%] -translate-x-1/2 w-full max-w-xl",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 border-b",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 text-stone-400"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>x(e.target.value),placeholder:"Type a command...",className:"flex-1 text-[15px] focus:outline-none",autoFocus:!0}),(0,a.jsx)("kbd",{className:"px-2 py-0.5 bg-stone-100 rounded text-[11px]",children:"ESC"})]}),(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto p-2",children:k.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{e.action(),s()},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left ".concat(h===t?"bg-stone-100":"hover:bg-stone-50"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat(h===t?"bg-[#1C1917] text-white":"bg-stone-100 text-stone-500"),children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-[13px] font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-[12px] text-stone-400",children:e.description})]})]},e.id))})]})})]}):null}function C(e){let{open:t,onClose:s}=e,[o,r]=(0,n.useState)(null),[x,u]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),b=async()=>{o&&(p(!0),await new Promise(e=>setTimeout(e,1500)),p(!1),f(!0),setTimeout(()=>{r(null),u(null),f(!1),s()},1500))};return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Upload Receipt"}),(0,a.jsx)("button",{onClick:s,className:"p-1 hover:bg-stone-100 rounded",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-5",children:o?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-stone-50 rounded-lg",children:[x?(0,a.jsx)("img",{src:x,alt:"Receipt",className:"w-16 h-16 object-cover rounded-lg"}):(0,a.jsx)("div",{className:"w-16 h-16 bg-stone-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-8 h-8 text-stone-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium truncate",children:o.name}),(0,a.jsxs)("p",{className:"text-[12px] text-stone-500",children:[(o.size/1024).toFixed(1)," KB"]})]}),h&&(0,a.jsx)("span",{className:"text-emerald-600 text-[13px] font-medium",children:"âœ“ Uploaded"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{r(null),u(null)},className:"flex-1 px-4 py-2 border rounded-lg text-[14px] font-medium hover:bg-stone-50",children:"Clear"}),(0,a.jsxs)("button",{onClick:b,disabled:m||h,className:"flex-1 px-4 py-2 bg-stone-900 text-white rounded-lg text-[14px] font-medium hover:bg-stone-800 disabled:opacity-50 flex items-center justify-center gap-2",children:[m&&(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),h?"Done!":m?"Uploading...":"Upload"]})]})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-stone-300 rounded-xl cursor-pointer hover:border-stone-400 hover:bg-stone-50 transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-10 h-10 text-stone-400 mb-3"}),(0,a.jsx)("span",{className:"text-[14px] text-stone-600 font-medium",children:"Click to upload receipt"}),(0,a.jsx)("span",{className:"text-[12px] text-stone-400 mt-1",children:"JPG, PNG, PDF up to 5MB"}),(0,a.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(r(s),f(!1),s.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{var t;return u(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(s)}else u(null)}},className:"hidden"})]})})]})]}):null}function Z(e){let{children:t}=e,s=(0,r.usePathname)(),{mode:l,businessName:i,labels:d}=(0,j.c5)(),N=function(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),t(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),{isOpen:e,open:()=>t(!0),close:()=>t(!1)}}(),[Z,E]=(0,n.useState)(!1),P=[{name:"Overview",href:"/dashboard",icon:x.Z},{name:d.inflowTab,href:"/dashboard/inflow",icon:u.Z},{name:d.outflowTab,href:"/dashboard/outflow",icon:m.Z},{name:d.directoryTab,href:"/dashboard/directory",icon:p.Z},{name:"Reconciliation",href:"/dashboard/reconciliation",icon:h.Z},{name:"Reports",href:"/dashboard/reports",icon:c.Z},{name:"Audit",href:"/dashboard/audit",icon:f.Z}],S=e=>"/dashboard"===e?"/dashboard"===s:s.startsWith(e);return(0,a.jsxs)("div",{className:"min-h-screen bg-[#FAFAF9]",children:[(0,a.jsx)(k,{isOpen:N.isOpen,onClose:N.close}),(0,a.jsx)(C,{open:Z,onClose:()=>E(!1)}),(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 h-14 bg-white border-b z-50",children:(0,a.jsxs)("div",{className:"h-full px-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(o.default,{href:"/dashboard",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-7 h-7 bg-[#1C1917] rounded-md flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-4 h-4 text-white",strokeWidth:2.5})}),(0,a.jsx)("span",{className:"font-semibold text-[15px]",children:"Soledgic"})]}),(0,a.jsx)("div",{className:"w-px h-5 bg-stone-200"}),(0,a.jsx)("span",{className:"text-[13px] text-stone-600",children:i}),(0,a.jsx)("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded ".concat("marketplace"===l?"bg-violet-100 text-violet-700":"bg-emerald-100 text-emerald-700"),children:"marketplace"===l?"Platform":"Business"})]}),(0,a.jsxs)("button",{onClick:N.open,className:"flex items-center gap-2 px-3 py-1.5 bg-stone-100 hover:bg-stone-200 rounded-lg text-[13px] text-stone-500",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Search..."}),(0,a.jsxs)("kbd",{className:"hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-white rounded border text-[11px]",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3"}),"K"]})]}),(0,a.jsx)(o.default,{href:"/dashboard/settings",className:"p-2 text-stone-500 hover:text-stone-900",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("aside",{className:"fixed top-14 left-0 bottom-0 w-56 bg-white border-r",children:[(0,a.jsx)("nav",{className:"p-3 space-y-1",children:P.map(e=>{let t=e.icon,s=S(e.href);return(0,a.jsxs)(o.default,{href:e.href,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-[13px] ".concat(s?"bg-stone-100 text-[#1C1917] font-medium":"text-stone-600 hover:bg-stone-50"),children:[(0,a.jsx)(t,{className:"w-4 h-4 ".concat(s?"text-[#1C1917]":"text-stone-400")}),e.name]},e.name)})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t",children:[(0,a.jsxs)("button",{onClick:()=>E(!0),className:"w-full flex items-center gap-2 px-3 py-2 text-[13px] text-stone-600 hover:bg-stone-50 rounded-lg",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-stone-400"}),"Upload Receipt"]}),(0,a.jsxs)("button",{onClick:N.open,className:"w-full flex items-center gap-2 px-3 py-2 text-[13px] text-stone-600 hover:bg-stone-50 rounded-lg",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-stone-400"}),d.recordInflowAction]})]})]}),(0,a.jsx)("main",{className:"pt-14 pl-56",children:(0,a.jsx)("div",{className:"p-6",children:t})})]})}},3235:function(e,t,s){s.d(t,{c5:function(){return c},dM:function(){return i},tf:function(){return d}});var a=s(7437),n=s(2265);let o={inflowTab:"Revenue",outflowTab:"Expenses",directoryTab:"Contacts",primaryInflow:"Invoices & Payments",primaryOutflow:"Bills & Expenses",primaryEntity:"Clients",secondaryEntity:"Vendors",recordInflowAction:"Record Income",recordOutflowAction:"Record Expense"},r={inflowTab:"Sales",outflowTab:"Payouts",directoryTab:"People",primaryInflow:"Sales & Splits",primaryOutflow:"Creator Payouts",primaryEntity:"Creators",secondaryEntity:"Partners",recordInflowAction:"Record Sale",recordOutflowAction:"Process Payout"},l=(0,n.createContext)(null);function i(e){let{children:t,mode:s,ledgerId:n,businessName:i}=e;return(0,a.jsx)(l.Provider,{value:{mode:s,ledgerId:n,businessName:i,labels:"marketplace"===s?r:o},children:t})}function c(){let e=(0,n.useContext)(l);if(!e)throw Error("useLedger must be used within LedgerProvider");return e}function d(){let{mode:e}=c();return"marketplace"===e}}}]);